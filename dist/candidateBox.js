"use strict";
class CandidateBox extends HTMLElement {
    constructor() {
        super();
        this.votes = 0;
        this.votesElement = document.createElement('p');
        this.candidateName = this.getAttribute('name') || '';
        this.candidateNameElement = document.createElement('p');
        const box = document.createElement('div');
        box.className = 'candidate';
        this.candidateNameElement.textContent = this.candidateName;
        const addVoteButton = this.createAddButton(this.addVote.bind(this));
        const removeVoteButton = this.createRemoveButton(this.removeVote.bind(this));
        this.votesElement.textContent = this.votes.toString();
        box.appendChild(this.candidateNameElement);
        box.appendChild(this.votesElement);
        box.appendChild(addVoteButton);
        box.appendChild(removeVoteButton);
        box.appendChild(this.setupStyles());
        const shadow = this.attachShadow({ mode: 'open' });
        shadow.appendChild(box);
    }
    setupStyles() {
        const style = document.createElement('style');
        style.textContent = `
            .candidate {
                padding: 10px;
                display: grid;
                grid-template-columns: 60% 30% 5% 5%;
                background-color: #2e7c39;
                margin-top: 10px;
            }

            .add-button {
                background-color: #00ff5294;
                border: 0;
                padding: 0;
            }

            .remove-button {
                background-color: #ff000094;
                border: 0;
                padding: 0;
            }
        `;
        return style;
    }
    createAddButton(callback) {
        const button = document.createElement('button');
        button.className = 'add-button';
        button.textContent = '+';
        button.onclick = callback;
        return button;
    }
    createRemoveButton(callback) {
        const button = document.createElement('button');
        button.className = 'remove-button';
        button.textContent = '-';
        button.onclick = callback;
        return button;
    }
    addVote() {
        this.votes++;
        document.dispatchEvent(new CustomEvent("logAdded", {
            detail: {
                log: `+vote - total ${this.votes} -  ${this.candidateName}`,
                eventType: 'voteAdded'
            }
        }));
        this.votesElement.textContent = this.votes.toString();
    }
    removeVote() {
        if (this.votes === 0) {
            return;
        }
        this.votes--;
        document.dispatchEvent(new CustomEvent('logAdded', {
            detail: {
                log: `-vote - total ${this.votes} -  ${this.candidateName}`,
                eventType: 'voteRemoved'
            }
        }));
        this.votesElement.textContent = this.votes.toString();
    }
    static get observedAttributes() {
        return ['name'];
    }
    attributeChangedCallback(name, _, newValue) {
        if (name === 'name') {
            this.candidateName = newValue;
            this.candidateNameElement.textContent = newValue;
        }
    }
}
customElements.define('candidate-box', CandidateBox);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FuZGlkYXRlQm94LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2NhbmRpZGF0ZUJveC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsTUFBTSxZQUFhLFNBQVEsV0FBVztJQU9sQztRQUNJLEtBQUssRUFBRSxDQUFDO1FBUFosVUFBSyxHQUFXLENBQUMsQ0FBQztRQUNsQixpQkFBWSxHQUF5QixRQUFRLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRWpFLGtCQUFhLEdBQVcsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDeEQseUJBQW9CLEdBQXlCLFFBQVEsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUM7UUFJckUsTUFBTSxHQUFHLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMxQyxHQUFHLENBQUMsU0FBUyxHQUFHLFdBQVcsQ0FBQztRQUM1QixJQUFJLENBQUMsb0JBQW9CLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7UUFFM0QsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3BFLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFFN0UsSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUV0RCxHQUFHLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO1FBQzNDLEdBQUcsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ25DLEdBQUcsQ0FBQyxXQUFXLENBQUMsYUFB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ZXNDb250ZW50IjpbImNsYXNzIENhbmRpZGF0ZUJveCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICB2b3RlczogbnVtYmVyID0gMDtcbiAgICB2b3Rlc0VsZW1lbnQ6IEhUTUxQYXJhZ3JhcGhFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIFxuICAgIGNhbmRpZGF0ZU5hbWU6IHN0cmluZyA9IHRoaXMuZ2V0QXR0cmlidXRlKCduYW1lJykgfHwgJyc7XG4gICAgY2FuZGlkYXRlTmFtZUVsZW1lbnQ6IEhUTUxQYXJhZ3JhcGhFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGNvbnN0IGJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBib3guY2xhc3NOYW1lID0gJ2NhbmRpZGF0ZSc7XG4gICAgICAgIHRoaXMuY2FuZGlkYXRlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLmNhbmRpZGF0ZU5hbWU7XG5cbiAgICAgICAgY29uc3QgYWRkVm90ZUJ1dHRvbiA9IHRoaXMuY3JlYXRlQWRkQnV0dG9uKHRoaXMuYWRkVm90ZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgY29uc3QgcmVtb3ZlVm90ZUJ1dHRvbiA9IHRoaXMuY3JlYXRlUmVtb3ZlQnV0dG9uKHRoaXMucmVtb3ZlVm90ZS5iaW5kKHRoaXMpKTtcblxuICAgICAgICB0aGlzLnZvdGVzRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMudm90ZXMudG9TdHJpbmcoKTtcblxuICAgICAgICBib3guYXBwZW5kQ2hpbGQodGhpcy5jYW5kaWRhdGVOYW1lRWxlbWVudCk7XG4gICAgICAgIGJveC5hcHBlbmRDaGlsZCh0aGlzLnZvdGVzRWxlbWVudCk7XG4gICAgICAgIGJveC5hcHBlbmRDaGlsZChhZGRWb3RlQnV0dG9uKTtcbiAgICAgICAgYm94LmFwcGVuZENoaWxkKHJlbW92ZVZvdGVCdXR0b24pO1xuICAgICAgICBib3guYXBwZW5kQ2hpbGQodGhpcy5zZXR1cFN0eWxlcygpKTtcblxuICAgICAgICBjb25zdCBzaGFkb3cgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcbiAgICAgICAgc2hhZG93LmFwcGVuZENoaWxkKGJveCk7XG4gICAgfVxuXG4gICAgc2V0dXBTdHlsZXMoKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSBgXG4gICAgICAgICAgICAuY2FuZGlkYXRlIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiA2MCUgMzAlIDUlIDUlO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyZTdjMzk7XG4gICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLmFkZC1idXR0b24ge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMwMGZmNTI5NDtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDA7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnJlbW92ZS1idXR0b24ge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZjAwMDA5NDtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDA7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcbiAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgIH1cblxuICAgIGNyZWF0ZUFkZEJ1dHRvbihjYWxsYmFjazogKCkgPT4gdm9pZCApOiBIVE1MQnV0dG9uRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24uY2xhc3NOYW1lID0gJ2FkZC1idXR0b24nO1xuICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSAnKyc7XG4gICAgICAgIGJ1dHRvbi5vbmNsaWNrID0gY2FsbGJhY2s7XG4gICAgICAgIHJldHVybiBidXR0b247XG4gICAgfVxuXG5cbiAgICBjcmVhdGVSZW1vdmVCdXR0b24oY2FsbGJhY2s6ICgpID0+IHZvaWQgKTogSFRNTEJ1dHRvbkVsZW1lbnQge1xuICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYnV0dG9uLmNsYXNzTmFtZSA9ICdyZW1vdmUtYnV0dG9uJztcbiAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJy0nO1xuICAgICAgICBidXR0b24ub25jbGljayA9IGNhbGxiYWNrO1xuICAgICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH1cblxuICAgIGFkZFZvdGUoKSB7XG4gICAgICAgIHRoaXMudm90ZXMrKztcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJsb2dBZGRlZFwiLCB7XG4gICAgICAgICAgICBkZXRhaWw6IHsgXG4gICAgICAgICAgICAgICAgbG9nOiBgK3ZvdGUgLSB0b3RhbCAke3RoaXMudm90ZXN9IC0gICR7dGhpcy5jYW5kaWRhdGVOYW1lfWAsXG4gICAgICAgICAgICAgICAgZXZlbnRUeXBlOiAndm90ZUFkZGVkJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSlcbiAgICAgICAgdGhpcy52b3Rlc0VsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLnZvdGVzLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgcmVtb3ZlVm90ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMudm90ZXMgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZvdGVzLS07XG4gICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdsb2dBZGRlZCcsIHtcbiAgICAgICAgICAgIGRldGFpbDogeyBcbiAgICAgICAgICAgICAgICBsb2c6IGAtdm90ZSAtIHRvdGFsICR7dGhpcy52b3Rlc30gLSAgJHt0aGlzLmNhbmRpZGF0ZU5hbWV9YCxcbiAgICAgICAgICAgICAgICBldmVudFR5cGU6ICd2b3RlUmVtb3ZlZCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpXG4gICAgICAgIHRoaXMudm90ZXNFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy52b3Rlcy50b1N0cmluZygpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuICAgICAgICByZXR1cm4gWyduYW1lJ107XG4gICAgfVxuXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWU6IHN0cmluZywgXzogc3RyaW5nLCBuZXdWYWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIGlmIChuYW1lID09PSAnbmFtZScpIHtcbiAgICAgICAgICAgIHRoaXMuY2FuZGlkYXRlTmFtZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgdGhpcy5jYW5kaWRhdGVOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5ld1ZhbHVlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2NhbmRpZGF0ZS1ib3gnLCBDYW5kaWRhdGVCb3gpO1xuIl19